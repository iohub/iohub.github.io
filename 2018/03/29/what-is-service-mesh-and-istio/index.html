<!doctype html>
<html class="scroll-smooth" lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      id="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>
      谈谈微服务架构中的基础设施：Service Mesh与Istio | LifeIO
    </title><meta name="application-name" content="Seven Demo" />
<meta name="apple-mobile-web-app-title" content="Seven Demo" />


  <meta name="title" content="谈谈微服务架构中的基础设施：Service Mesh与Istio" />



  <meta name="description" content="作为一种架构模式，微服务将复杂系统切分为数十乃至上百个小服务，每个服务负责实现一个独立的业务逻辑。这些小服务易于被小型的软件工程师团队所理解和修改，并带来了语言和框架选择灵活性，缩短应用开发上线时间，可根据不同的工作负载和资源要求对服务进行独立缩扩容等优势。另一方面，当应用被拆分为多个微服务进程后，进程内的方法调用变成了了进程间的远程调用。引入了对大量服务的连接、管理和监控的复杂性,本文介绍了Service Mesh模式如何应对微服务架构的这些挑战，以及Service Mesh的明星开源项目Istio。" />
<meta name="theme-color" content="#ffffff" /><link rel="icon" href="/favicon.svg" /><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" /><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff" />




  
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/instantsearch.css@8.0.0/themes/reset-min.css"
    integrity="sha256-2AeJLzExpZvqLUxMfcs+4DWcMwNfpnjUeAAvEtPr0wU="
    crossorigin="anonymous" />

  
  
  
    
  
  <link href="/css/search.min.b8b96b3f3766af58232d6ad859aeb82e459903dd2a53ab357afbfa26d6b754b5.css" rel="stylesheet" />





  <link
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
    rel="stylesheet" />







  

<link href="/css/styles.min.d82aa6c5e145c28042cf821ae2417694b3daec154f45b4172d1d549b7db3b62c.css" rel="stylesheet" />

<link href="/css/custom.min.a3576bac66c3a82b69d83286136700cfa409d13273e51b6505482a06e6dd109d.css" rel="stylesheet" />
  
  
  
    
  
  <link href="/css/image-preview.min.efb5024b06063b21933b7f8d942a808f5ca19d586b6240f4472b144108b0e0f9.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
<script>
  
  if (
    localStorage.getItem("color-theme") === "dark" ||
    (!("color-theme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  } else {
    document.documentElement.classList.remove("dark");
  }
</script>

  </head>
  <body class="flex h-screen flex-col bg-white dark:bg-gray-900"><nav
  id="navbar"
  class="fixed start-0 top-0 z-20 flex w-full justify-center border-b border-gray-200 bg-white/85 backdrop-blur-md md:h-38 dark:border-gray-700 dark:bg-gray-900/85">
  <div
    class="mx-auto flex w-[1280px] flex-wrap items-center justify-between place-self-center object-center p-4">
    
    
    <a
      href="https://iohub.github.io/"
      class="flex items-center justify-start space-x-3 rtl:space-x-reverse">
      
      <p class="w-[120px]">
        
        
          
        
        <img
          id="logo-light-icon"
          src="/images/logo.svg"
          class="h-[56px]"
          alt="Logo" />
        <img
          id="logo-dark-icon"
          src="/images/logo-footer.svg"
          class="hidden h-[56px]"
          alt="Logo" />
      </p></a>

    
    <div class="flex items-center space-x-3 md:order-2 rtl:space-x-reverse">
      <button
        id="theme-toggle"
        type="button"
        class="h-10 w-10 p-2.5 text-sm text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700">
        <svg
          id="theme-toggle-dark-icon"
          class="hidden h-5 w-5"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
        </svg>
        <svg
          id="theme-toggle-light-icon"
          class="hidden h-5 w-5"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
            fill-rule="evenodd"
            clip-rule="evenodd"></path>
        </svg>
      </button>

      
      
        <button
          type="button"
          id="search-icon"
          class="bg-blue-700 p-3 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none md:p-5 dark:bg-blue-600 dark:hover:bg-blue-700">
          <svg
            t="1702210633165"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="4364"
            width="16"
            height="16">
            <path
              d="M426.666667 768a339.285333 339.285333 0 0 0 208.938666-72.021333l187.562667 187.562666 60.330667-60.330666-187.562667-187.562667A339.285333 339.285333 0 0 0 768 426.666667c0-188.202667-153.130667-341.333333-341.333333-341.333334s-341.333333 153.130667-341.333334 341.333334 153.130667 341.333333 341.333334 341.333333z m0-597.333333c141.184 0 256 114.816 256 256s-114.816 256-256 256-256-114.816-256-256 114.816-256 256-256z"
              fill="#ffffff"
              p-id="4365"></path>
          </svg>
        </button>
      

      
      <button
        data-collapse-toggle="navbar-sticky"
        type="button"
        class="inline-flex h-10 w-10 items-center justify-center p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none md:hidden dark:text-gray-400 dark:hover:bg-gray-700"
        aria-controls="navbar-sticky"
        aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg
          class="h-5 w-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 17 14">
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15" />
        </svg>
      </button>
    </div>

    <div
  class="hidden w-full items-center justify-between md:order-1 md:flex md:w-auto"
  id="navbar-sticky">
  <ul
    class="mt-4 flex flex-col rounded-lg border border-gray-300 p-4 font-medium md:mt-0 md:flex-row md:space-x-8 md:border-0 md:p-0 rtl:space-x-reverse dark:border-gray-700 dark:bg-gray-800/50 md:dark:bg-transparent">
    
      <li>
        
          <a
            aria-current="page"
            class="block rounded-lg px-3 py-2 text-gray-900 hover:bg-gray-100 md:p-0 md:hover:bg-transparent md:hover:text-blue-700 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
            href="/doc/">
            
            Home
          </a>
        
      </li>
    
      <li>
        
          <a
            aria-current="page"
            class="block rounded-lg px-3 py-2 text-gray-900 hover:bg-gray-100 md:p-0 md:hover:bg-transparent md:hover:text-blue-700 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
            href="/posts/">
            
            Posts
          </a>
        
      </li>
    
      <li>
        
          <a
            aria-current="page"
            class="block rounded-lg px-3 py-2 text-gray-900 hover:bg-gray-100 md:p-0 md:hover:bg-transparent md:hover:text-blue-700 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
            href="/archive">
            
            Archive
          </a>
        
      </li>
    

    
      <button
        id="dropdownNavbarLink-category"
        data-dropdown-toggle="dropdownNavbar-category"
        class="flex w-full items-center justify-between rounded-lg px-3 py-2 text-gray-900 hover:bg-gray-100 md:w-auto md:border-0 md:p-0 md:hover:bg-transparent md:hover:text-blue-700 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:focus:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500">
        Category
        <svg
          class="ms-2.5 h-2.5 w-2.5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 10 6">
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 1 4 4 4-4" />
        </svg>
      </button>

      <div
        id="dropdownNavbar-category"
        class="z-10 hidden w-44 divide-y divide-gray-100 rounded-lg bg-white font-normal shadow dark:divide-gray-600 dark:bg-gray-800">
        <ul
          class="py-2 text-sm text-gray-700 dark:text-gray-400"
          aria-labelledby="dropdownLargeButton">
          
            <li>
              <a
                href="https://iohub.github.io/categories/etcd%E5%AD%A6%E4%B9%A0/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >etcd学习</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/go-tutorial/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >Go tutorial</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/tech/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >Tech</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/technical/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >Technical</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >使用文档</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >编程技术</a
              >
            </li>
          
            <li>
              <a
                href="https://iohub.github.io/categories/%E8%B5%B5%E5%8C%96%E5%86%B0%E5%8D%9A%E5%AE%A2/"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                >赵化冰博客</a
              >
            </li>
          
        </ul>
      </div>
    
  </ul>
</div>
</div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let navbarDom = document.getElementById("navbar");
    let isNavScrolled = false;

    if (window.innerWidth >= 768) {
      navbarDom.classList.add("navbar-init");

      var scrollTop = 0;

      window.addEventListener("scroll", function () {
        scrollTop = window.pageYOffset;

        if (scrollTop >= 10 && !isNavScrolled) {
          isNavScrolled = true;
          navbarDom.classList.add("navbar-scroll");
        } else if (scrollTop < 10 && isNavScrolled) {
          isNavScrolled = false;
          navbarDom.classList.remove("navbar-scroll");
        }
      });
    } else {
      navbarDom.classList.remove("navbar-init");
    }
  });
</script>

  
  <div
    id="single-page-container"
    class="mx-auto my-5 mt-22 w-full rounded-b-lg border px-5 md:mt-[151px] md:max-w-5xl dark:border-gray-700">
    <div class="flex w-full justify-between">
      <div id="post-container" class="w-full">
        
        <div
          id="post-title"
          data-popover-target="popover-animation"
          data-popover-offset="0"
          data-popover-placement="bottom"
          class="px-3 py-10 text-center text-3xl font-bold tracking-wide text-black dark:text-white">
          谈谈微服务架构中的基础设施：Service Mesh与Istio
        </div><div
  data-popover
  id="popover-animation"
  role="tooltip"
  class="invisible absolute z-10 inline-block w-full border border-gray-200 bg-white/90 text-sm text-gray-500 opacity-0 shadow-sm backdrop-blur-md transition-opacity duration-300 md:max-w-5xl dark:border-gray-600 dark:bg-gray-800/90 dark:text-gray-400">
  <div
    class="border-b border-gray-200 bg-gray-100 px-5 py-2 dark:border-gray-600 dark:bg-gray-700">
    <h3 class="font-semibold text-gray-900 dark:text-white">
      Meta info of this page
    </h3>
  </div>

  
  <ul class="px-3 py-2">
    
    
    
    
      <li>
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M170.666667 469.333333h256a42.666667 42.666667 0 0 0 42.666666-42.666666V170.666667a42.666667 42.666667 0 0 0-42.666666-42.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v256a42.666667 42.666667 0 0 0 42.666667 42.666666z m426.666666 0h256a42.666667 42.666667 0 0 0 42.666667-42.666666V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667h-256a42.666667 42.666667 0 0 0-42.666666 42.666667v256a42.666667 42.666667 0 0 0 42.666666 42.666666zM170.666667 896h256a42.666667 42.666667 0 0 0 42.666666-42.666667v-256a42.666667 42.666667 0 0 0-42.666666-42.666666H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v256a42.666667 42.666667 0 0 0 42.666667 42.666667z m554.666666 0c94.122667 0 170.666667-76.544 170.666667-170.666667s-76.544-170.666667-170.666667-170.666666-170.666667 76.544-170.666666 170.666666 76.544 170.666667 170.666666 170.666667z" />
          </svg>

          <div class="flew ms-3 flex items-center space-x-1 text-center">
            
              <a class="rounded-md border px-2" href="https://iohub.github.io/categories/tech/"
                ><span>Tech</span></a
              >
            
          </div>
        </div>
      </li>
    

    
    

    
    
      <li>
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M773.2 178.1v91c0 49.5-40.3 89.8-89.8 89.8-24.1 0-46.7-9.4-63.7-26.5-16.8-17-26.1-39.4-26.1-63.2v-90.8-0.3H433.8v91.1c0 49.5-40.3 89.8-89.8 89.8-49.2 0-89.2-40.3-89.2-89.8v-90.8-0.2C163.6 180.2 90 255 90 346.7v379.9c0 93 75.6 168.6 168.6 168.6h510.7c93 0 168.6-75.6 168.6-168.6v-380c0-91.6-73.5-166.4-164.7-168.5zM408.7 739.4c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-140.6c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-141c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m169.4 281.6c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-140.6c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-141c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-43.8-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m169.4 281.6c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-44.4-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-140.6c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-44.4-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z m0-140.5c0 24.6-19.8 44.4-44.4 44.4h-39.5c-24.6 0-44.4-19.8-44.4-44.4v-10.7c0-24.6 19.8-44.4 44.4-44.4h39.5c24.6 0 44.4 19.8 44.4 44.4v10.7z" />
            <path
              d="M344.1 316.2c25.6 0 47-20.8 47-47v-90.8c0.5-26.2-20.8-47-46.5-47s-47 20.8-47 47v90.8c0 25.6 20.8 47 46.5 47zM683.4 316.2c25.6 0 47-20.8 47-47v-90.8c-0.5-26.2-21.4-47-47-47s-47 20.8-47 47v90.8c0 25.6 20.8 47 47 47z" />
          </svg>
          <span class="ms-3"
            >Plublished on March 29 2018</span
          >
        </div>
      </li>

      <li>
        
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M534.016 342.016l0 180.010667 148.010667 89.984-29.994667 52.010667-182.016-109.994667 0-212.010667 64 0zM896 432l-290.005333 0 118.016-120.021333q-88.021333-88.021333-210.986667-89.002667t-210.986667 84.992q-86.016 88.021333-86.016 208t86.016 208 210.005333 88.021333 212.010667-88.021333q86.016-86.016 86.016-208l86.016 0q0 157.994667-112 267.989333-112 112-272 112t-272-112q-112-109.994667-112-267.008t112-269.013333 269.994667-112 269.994667 112l116.010667-120.021333 0 304z"></path>
          </svg>
          <span class="ms-3"
            >Updated on January 14 2024</span
          >
        </div>
      </li>
    

    
    
      <li>
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M760.744759 112.25055 267.815093 112.25055c-42.271756 0-76.659961 34.399461-76.659961 76.670194l0 91.080391 0 297.006438 0 232.745878c0 42.271756 34.388205 76.670194 76.659961 76.670194l401.851321 0c42.270732 0 76.658937-34.398438 76.658937-76.670194L746.325351 280.000112c0-42.271756-34.388205-76.671217-76.658937-76.671217L267.815093 203.328895c-11.085476 0-21.60404 2.424212-31.120788 6.670933l0-21.080108c0-17.165961 13.964036-31.131021 31.120788-31.131021l492.929666 0c17.156752 0 31.119765 13.96506 31.119765 31.131021l0 620.832707c0 12.586666 10.1952 22.77061 22.771633 22.77061 12.573363 0 22.76754-10.183943 22.76754-22.77061L837.403696 188.91972C837.403696 146.648988 803.018561 112.25055 760.744759 112.25055zM453.364043 397.762189l34.512025 0 83.119069 247.542886-39.646975 0-22.704095-72.100108-75.068719 0-21.225417 72.100108-37.279045 0L453.364043 397.762189zM479.225037 478.278991c-3.333932-10.773368-6.225795-20.557198-8.626471-29.262464-1.958608 8.516977-4.214998 16.98893-6.78145 25.360598l-19.790742 63.673182 53.589522 0L479.225037 478.278991z" />
          </svg>
          <span class="ms-3">7583 words</span>
        </div>
      </li>
    

    
    
      <li>
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M502.784 75.264c-245.76 0-443.904 198.144-443.904 443.904S259.584 962.56 502.784 962.56c245.76 0 443.904-198.144 443.904-443.904s-200.192-443.392-443.904-443.392z m289.28 578.048c-6.656 13.824-18.432 20.48-31.744 20.48-4.608 0-9.216 0-13.824-2.048L484.864 552.96c-11.264-4.608-20.48-18.432-20.48-31.744v-245.76c0-18.432 15.872-34.304 34.304-34.304s34.304 15.872 34.304 34.304v225.28l241.152 109.056c17.92 6.656 24.576 25.088 17.92 43.52z" />
          </svg>
          <span class="ms-3">16 minutes</span>
        </div>
      </li>
    

    
    
      <li>
        <div
          class="group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <svg
            class="h-5 w-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M455.68 404.032l91.264 529.152s67.456-69.44 123.136-117.888L792.512 979.2c4.928 6.656 15.68 7.104 23.872 1.088l52.288-38.208c8.256-6.016 10.944-16.32 5.952-22.976L755.52 759.68c62.208-25.088 164.672-53.632 164.672-53.632L455.68 404.032zM308.352 648.384L172.48 747.712c-20.544 15.04-24.256 43.968-8 65.408 16.256 21.376 46.272 27.008 66.752 12.032l135.872-99.328c20.992-15.36 24.512-45.504 8.256-66.88-16.192-21.44-46.016-25.92-67.008-10.56z m641.344-409.408C933.44 217.6 904.064 212.8 882.624 228.48l-134.912 98.688c-21.44 15.68-25.152 44.672-8.896 66.048 16.256 21.376 46.272 27.008 67.712 11.328l134.912-98.688c21.44-15.68 24.512-45.504 8.256-66.88z m-630.4-102.144c-15.936-20.928-45.248-25.728-66.752-10.048-20.096 14.72-24.256 43.968-8.32 64.896L349.76 330.496c15.936 20.992 45.696 25.408 65.792 10.688 21.44-15.68 25.216-44.608 9.28-65.6L319.296 136.832zM585.792 301.76c26.176 4.224 50.24-13.376 53.632-39.232L660.608 94.72c3.392-25.792-14.976-49.984-41.536-54.656-26.176-4.224-50.24 13.376-53.632 39.168l-21.248 167.872c-3.264 25.856 15.104 49.984 41.6 54.656zM329.728 489.024c2.56-25.92-15.808-50.048-41.536-54.656L118.144 406.4c-27.072-3.584-50.688 13.696-53.632 39.232-3.904 26.944 14.464 51.072 41.536 54.656l170.048 27.968c25.728 4.48 49.408-12.8 53.632-39.232z" />
          </svg>
          <p class="ms-3">
            <span
              id="twikoo_visitors"
              class="page-info-pageview-count"
              data-path="/2018/03/29/what-is-service-mesh-and-istio/"
              >...</span
            >
            views
          </p>
        </div>
      </li>
    
  </ul>

  <div data-popper-arrow></div>
</div>

        
          
          
            <div id="post-feature" class="-mx-5">
              <img
                class="h-60 w-full object-cover md:h-120"
                src="https://iohub.github.io/images/posts/11.jpg"
                alt="preview image"
                srcset="" />
            </div>
          
        

        
        <div
          id="single-content"
          class="format mx-auto max-w-none px-1 py-5 md:format-base dark:format-invert format-figure:flex format-figure:flex-col format-figure:items-center format-img:cursor-zoom-in md:px-3 lg:px-10 dark:text-gray-300">
          <h2 class="group head-tag" id="微服务架构的演进">微服务架构的演进<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%9e%b6%e6%9e%84%e7%9a%84%e6%bc%94%e8%bf%9b"></a></h2><p>作为一种架构模式，微服务将复杂系统切分为数十乃至上百个小服务，每个服务负责实现一个独立的业务逻辑。这些小服务易于被小型的软件工程师团队所理解和修改，并带来了语言和框架选择灵活性，缩短应用开发上线时间，可根据不同的工作负载和资源要求对服务进行独立缩扩容等优势。</p>
<p>另一方面，当应用被拆分为多个微服务进程后，进程内的方法调用变成了了进程间的远程调用。引入了对大量服务的连接、管理和监控的复杂性。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./microservice.png"
      alt="microservice"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>该变化带来了分布式系统的一系列问题，例如：</p>
<ul>
<li>如何找到服务的提供方？</li>
<li>如何保证远程方法调用的可靠性？</li>
<li>如何保证服务调用的安全性？</li>
<li>如何降低服务调用的延迟？</li>
<li>如何进行端到端的调试？</li>
</ul>
<p>另外生产部署中的微服务实例也增加了运维的难度,例如：</p>
<ul>
<li>如何收集大量微服务的性能指标已进行分析？</li>
<li>如何在不影响上线业务的情况下对微服务进行升级？</li>
<li>如何测试一个微服务集群部署的容错和稳定性？</li>
</ul>
<p>这些问题涉及到成百上千个服务的通信、管理、部署、版本、安全、故障转移、策略执行、遥测和监控等，要解决这些微服务架构引入的问题并非易事。</p>
<p>让我们来回顾一下微服务架构的发展过程。在出现服务网格之前，我们最开始在微服务应用程序内理服务之间的通讯逻辑，包括服务发现，熔断，重试，超时，加密，限流等逻辑。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./1.png"
      alt="1"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>在一个分布式系统中，这部分逻辑比较复杂，为了为微服务应用提供一个稳定、可靠的基础设施层，避免大家重复造轮子，并减少犯错的可能，一般会通过对这部分负责服务通讯的逻辑进行抽象和归纳，形成一个代码库供各个微服务应用程序使用，如下图所示：</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./2.png"
      alt="2"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>公共的代码库减少了应用程序的开发和维护工作量，降低了由应用开发人员单独实现微服务通讯逻辑出现错误的机率，但还是存在下述问题：</p>
<ul>
<li>微服务通讯逻辑对应用开发人员并不透明，应用开发人员需要理解并正确使用代码 库，不能将其全部精力聚焦于业务逻辑。</li>
<li>需要针对不同的语言/框架开发不同的代码库，反过来会影响微服务应用开发语言 和框架的选择，影响技术选择的灵活性。</li>
<li>随着时间的变化，代码库会存在不同的版本，不同版本代码库的兼容性和大量运行 环境中微服务的升级将成为一个难题。</li>
</ul>
<p>可以将微服务之间的通讯基础设施层和 TCP/IP 协议栈进行类比。TCP/IP 协议栈为操作系统中的所有应用提供基础通信服务，但 TCP/IP 协议栈和应用程序之间并没有紧密的耦合关系，应用只需要使用 TCP/IP 协议提供的底层通讯功能,并不关心 TCP/IP 协议的实现，如 IP 如何进行路由，TCP 如何创建链接等。</p>
<p>同样地，微服务应用也不应该需要关注服务发现，Load balancing，Retries，Circuit Breaker 等微服务之间通信的底层细节。如果将为微服务提供通信服务的这部分逻辑从应用程序进程中抽取出来，作为一个单独的进程进行部署，并将其作为服务间的通信代理，可以得到如下图所示的架构：</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./sidecar.png"
      alt="sidecar"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>因为通讯代理进程伴随应用进程一起部署，因此形象地把这种部署方式称为“sidecar”/边车（即三轮摩托的挎斗）。</p>
<p>应用间的所有流量都需要经过代理，由于代理以 sidecar 方式和应用部署在同一台主机上，应用和代理之间的通讯可以被认为是可靠的。由代理来负责找到目的服务并负责通讯的可靠性和安全等问题。</p>
<p>当服务大量部署时，随着服务部署的 sidecar 代理之间的连接形成了一个如下图所示的网格，该网格成为了微服务的通讯基础设施层，承载了微服务之间的所有流量，被称之为 Service Mesh（服务网格）。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./mesh.png"
      alt="mesh"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>_服务网格是一个基础设施层，用于处理服务间通信。云原生应用有着复杂的服务拓扑，服务网格保证请求可以在这些拓扑中可靠地穿梭。在实际应用当中，服务网格通常是由一系列轻量级的网络代理组成的，它们与应用程序部署在一起，但应用程序不需要知道它们的存在。</p>
<p>_William Morgan _
<a
  class="after:content-['_↗']"
  href="https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/"
  target="_blank"
  ><em>WHAT’S A SERVICE MESH? AND WHY DO I NEED ONE?</em>
</a
>
_</p>
<p>服务网格中有数量众多的 Sidecar 代理，如果对每个代理分别进行设置，工作量将非常巨大。为了更方便地对服务网格中的代理进行统一集中控制，在服务网格上增加了控制面组件。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./controlplane.png"
      alt="controlplane"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>这里我们可以类比 SDN 的概念，控制面就类似于 SDN 网管中的控制器，负责路由策略的指定和路由规则下发；数据面类似于 SDN 网络中交换机，负责数据包的转发。</p>
<p>由于微服务的所有通讯都由服务网格基础设施层提供，通过控制面板和数据面板的配合，可以对这些通讯进行监控、托管和控制，以实现微服务灰度发布，调用分布式追踪，故障注入模拟测试，动态路由规则，微服务闭环控制等管控功能。</p>
<h2 class="group head-tag" id="istio-服务网格">Istio 服务网格<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#istio-%e6%9c%8d%e5%8a%a1%e7%bd%91%e6%a0%bc"></a></h2><p>Istio 是一个 Service Mesh 开源项目，是 Google 继 Kubernetes 之后的又一力作，主要参与的公司包括 Google，IBM 和 Lyft。</p>
<p>凭借 kubernetes 良好的架构设计及其强大的扩展性，Google 围绕 kubernetes 打造一个生态系统。Kubernetes 用于微服务的编排（编排是英文 Orchestration 的直译，用大白话说就是描述一组微服务之间的关联关系，并负责微服务的部署、终止、升级、缩扩容等）。其向下用 CNI(容器网络接口），CRI（容器运行时接口）标准接口可以对接不同的网络和容器运行时实现，提供微服务运行的基础设施。向上则用 Istio 提供了微服务治理功能。</p>
<p>由下图可见，Istio 补充了 Kubernetes 生态圈的重要一环，是 Google 的微服务版图里一个里程碑式的扩张。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./k8s-ecosystem.png"
      alt="Kubernetes 生态圈"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>Google 借 Istio 的力量推动微服务治理的事实标准，对 Google 自身的产品 Google Cloud 有极其重大的意义。其他的云服务厂商，如 Redhat，Pivotal，Nginx，Buoyant 等看到大势所趋，也纷纷跟进，宣布自身产品和 Istio 进行集成，以避免自己被落下，丢失其中的市场机会。</p>
<p>可以预见不久的将来，对于云原生应用而言，采用 kubernetes 进行服务部署和集群管理，采用 Istio 处理服务通讯和治理，将成为微服务应用的标准配置。</p>
<p>Istio 服务包括网格由数据面和控制面两部分。</p>
<ul>
<li>数据面由一组智能代理（Envoy）组成，代理部署为边车，调解和控制微服务之间所有的网络通信。</li>
<li>控制面负责管理和配置代理来路由流量，以及在运行时执行策略。</li>
</ul>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./istio-architecture.png"
      alt="istio-architecture"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<h3 class="group head-tag" id="istio-控制面">Istio 控制面<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#istio-%e6%8e%a7%e5%88%b6%e9%9d%a2"></a></h3><p>Istio 控制面板包括 3 个组件:Pilot, Mixer 和 Istio-Auth。</p>
<h4 class="group head-tag" id="pilot">Pilot<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#pilot"></a></h4><p>Pilot 维护了网格中的服务的标准模型，这个标准模型是独立于各种底层平台的。Pilot 通过适配器和各底层平台对接，以填充此标准模型。</p>
<p>例如 Pilot 中的 Kubernetes 适配器通过 Kubernetes API 服务器得到 kubernetes 中 pod 注册信息的更改，入口资源以及存储流量管理规则等信息，然后将该数据被翻译为标准模型提供给 Pilot 使用。通过适配器模式，Pilot 还可以从 Mesos, Cloud Foundry, Consul 中获取服务信息，也可以开发适配器将其他提供服务发现的组件集成到 Pilot 中。</p>
<p>除此以外，Pilo 还定义了一套和数据面通信的标准 API，API 提供的接口内容包括服务发现 、负载均衡池和路由表的动态更新。通过该标准 API 将控制面和数据面进行了解耦，简化了设计并提升了跨平台的可移植性。基于该标准 API 已经实现了多种 Sidecar 代理和 Istio 的集成，除 Istio 目前集成的 Envoy 外，还可以和 Linkerd, Nginmesh 等第三方通信代理进行集成，也可以基于该 API 自己编写 Sidecar 实现。</p>
<p>Pilot 还定义了一套 DSL（Domain Specific Language）语言，DSL 语言提供了面向业务的高层抽象，可以被运维人员理解和使用。运维人员使用该 DSL 定义流量规则并下发到 Pilot，这些规则被 Pilot 翻译成数据面的配置，再通过标准 API 分发到 Envoy 实例，可以在运行期对微服务的流量进行控制和调整。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./pilot.png"
      alt="pilot"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<h4 class="group head-tag" id="mixer">Mixer<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#mixer"></a></h4><p>在微服务应用中，通常需要部署一些基础的后端公共服务以用于支撑业务功能。这些基础设施包括策略类如访问控制，配额管理；以及遥测报告如 APM，日志等。微服务应用和这些后端支撑系统之间一般是直接集成的，这导致了应用和基础设置之间的紧密耦合，如果因为运维原因需要对基础设置进行升级或者改动，则需要修改各个微服务的应用代码，反之亦然。</p>
<p>为了解决该问题，Mixer 在应用程序代码和基础架构后端之间引入了一个通用中间层。该中间层解耦了应用和后端基础设施，应用程序代码不再将应用程序代码与特定后端集成在一起，而是与 Mixer 进行相当简单的集成，然后 Mixer 负责与后端系统连接。</p>
<p>Mixer 主要提供了三个核心功能：</p>
<ul>
<li>前提条件检查。允许服务在响应来自服务消费者的传入请求之前验证一些前提条件。前提条件可以包括服务使用者是否被正确认证，是否在服务的白名单上，是否通过 ACL 检查等等。</li>
<li>配额管理。 使服务能够在分配和释放多个维度上的配额，配额这一简单的资源管理工具可以在服务消费者对有限资源发生争用时，提供相对公平的（竞争手段）。Rate Limiting 就是配额的一个例子。</li>
<li>遥测报告。使服务能够上报日志和监控。在未来，它还将启用针对服务运营商以及服务消费者的跟踪和计费流。</li>
</ul>
<p>Mixer 的架构如图所示:</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./mixer2.png"
      alt="Mixer"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>首先，Sidecar 会从每一次请求中收集相关信息，如请求的路径，时间，源 IP，目地服务，tracing 头，日志等，并请这些属性上报给 Mixer。Mixer 和后端服务之间是通过适配器进行连接的，Mixer 将 Sidecar 上报的内容通过适配器发送给后端服务。</p>
<p>由于 Sidecar 只和 Mixer 进行对接，和后端服务之间并没有耦合，因此使用 Mixer 适配器机制可以接入不同的后端服务，而不需要修改应用的代码，例如通过不同的 Mixer 适配器，可以把 Metrics 收集到 Prometheus 或者 InfluxDB，甚至可以在不停止应用服务的情况下动态切换后台服务。</p>
<p>其次，Sidecar 在进行每次请求处理时会通过 Mixer 进行策略判断，并根据 Mixer 返回的结果决定是否继续处理该次调用。通过该方式，Mixer 将策略决策移出应用层，使运维人员可以在运行期对策略进行配置，动态控制应用的行为，提高了策略控制的灵活性。例如可以配置每个微服务应用的访问白名单，不同客户端的 Rate limiting，等等。</p>
<p>逻辑上微服务之间的每一次请求调用都会经过两次 Mixer 的处理：调用前进行策略判断，调用后进行遥测数据收集。Istio 采用了一些机制来避免 Mixer 的处理影响 Envoy 的转发效率。</p>
<p>从上图可以看到，Istio 在 Envoy 中增加了一个 Mixer Filter，该 Filter 和控制面的 Mixer 组件进行通讯，完成策略控制和遥测数据收集功能。Mixer Filter 中保存有策略判断所需的数据缓存，因此大部分策略判断在 Envoy 中就处理了，不需要发送请求到 Mixer。另外 Envoy 收集到的遥测数据会先保存在 Envoy 的缓存中，每隔一段时间再通过批量的方式上报到 Mixer。</p>
<h4 class="group head-tag" id="auth">Auth<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#auth"></a></h4><p>Istio 支持双向 SSL 认证（Mutual SSL Authentication）和基于角色的访问控制（RBAC），以提供端到端的安全解决方案。</p>
<h5 class="group head-tag" id="认证">认证<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e8%ae%a4%e8%af%81"></a></h5><p>Istio 提供了一个内部的 CA(证书机构),该 CA 为每个服务颁发证书，提供服务间访问的双向 SSL 身份认证，并进行通信加密，其架构如下图所示：</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./auth.png"
      alt="auth"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>其工作机制如下：
部署时：</p>
<ul>
<li>CA 监听 Kubernetes API Server, 为集群中的每一个 Service Account 创建一对密钥和证书，并发送给 Kubernetes API Server。注意这里不是为每个服务生成一个证书，而是为每个 Service Account 生成一个证书。Service Account 和 kubernetes 中部署的服务可以是一对多的关系。Service Account 被保存在证书的 SAN(Subject Alternative Name)字段中。</li>
<li>当 Pod 创建时，Kubernetes 根据该 Pod 关联的 Service Account 将密钥和证书以 Kubernetes Secrets 资源的方式加载为 Pod 的 Volume，以供 Envoy 使用。</li>
<li>Pilot 生成数据面的配置，包括 Envoy 需使用的密钥和证书信息，以及哪个 Service Account 可以允许运行哪些服务，下发到 Envoy。
<blockquote>
<p>备注：如果是虚机环境，则采用一个 Node Agent 生成密钥，向 Istio CA 申请证书，然后将证书传递给 Envoy。</p>
</blockquote>
</li>
</ul>
<p>运行时：</p>
<ul>
<li>服务客户端的出站请求被 Envoy 接管。</li>
<li>客户端的 Envoy 和服务端的 Envoy 开始双向 SSL 握手。在握手阶段，客户端 Envoy 会验证服务端 Envoy 证书中的 Service Account 有没有权限运行该请求的服务，如没有权限，则认为服务端不可信，不能创建链接。</li>
<li>当加密 TSL 链接创建好后，请求数据被发送到服务端的 Envoy，然后被 Envoy 通过一个本地的 TCP 链接发送到服务中。</li>
</ul>
<h5 class="group head-tag" id="鉴权">鉴权<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e9%89%b4%e6%9d%83"></a></h5><p>Istio“基于角色的访问控制”（RBAC）提供了命名空间，服务，方法三个不同大小粒度的服务访问权限控制。其架构如下图所示：</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./authorization.png"
      alt="authorization"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>管理人员可以定制访问控制的安全策略，这些安全策略保存在 Istio Config Store 中。 Istio RBAC Engine 从 Config Store 中获取安全策略，根据安全策略对客户端发起的请求进行判断，并返回鉴权结果（允许或者禁止）。</p>
<p>Istio RBAC Engine 目前被实现为一个 Mixer Adapter，因此其可以从 Mixer 传递过来的上下文中获取到访问请求者的身份（Subject）和操作请求（Action），并通过 Mixer 对访问请求进行策略控制，允许或者禁止某一次请求。</p>
<p>Istio Policy 中包含两个基本概念：</p>
<ul>
<li>
<p>ServiceRole，定义一个角色，并为该角色指定对网格中服务的访问权限。指定角色访问权限时可以在命名空间，服务，方法的不同粒度进行设置。</p>
</li>
<li>
<p>ServiceRoleBinding，将角色绑定到一个 Subject，可以是一个用户，一组用户或者一个服务。</p>
</li>
</ul>
<h3 class="group head-tag" id="istio-数据面">Istio 数据面<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#istio-%e6%95%b0%e6%8d%ae%e9%9d%a2"></a></h3><p>Istio 数据面以“边车”(sidecar)的方式和微服务一起部署，为微服务提供安全、快速、可靠的服务间通讯。由于 Istio 的控制面和数据面以标准接口进行交互，因此数据可以有多种实现，Istio 缺省使用了 Envoy 代理的扩展版本。</p>
<p>Envoy 是以 C ++开发的高性能代理，用于调解服务网格中所有服务的所有入站和出站流量。Envoy 的许多内置功能被 Istio 发扬光大，例如动态服务发现，负载均衡，TLS 加密，HTTP/2 &amp; gRPC 代理，熔断器，路由规则，故障注入和遥测等。</p>
<p>Istio 数据面支持的特性如下：</p>
<table>
<thead>
<tr>
<th>Outbound 特性</th>
<th>Inbound 特性</th>
</tr>
</thead>
<tbody>
<tr>
<td>Service authentication（服务认证）</td>
<td>Service authentication（服务认证）</td>
</tr>
<tr>
<td>Load Balancing（负载均衡）</td>
<td>Authorization（鉴权）</td>
</tr>
<tr>
<td>Retry and circuit breaker（重试和断路器）</td>
<td>Rate limits（请求限流）</td>
</tr>
<tr>
<td>Fine-grained routing（细粒度的路由）</td>
<td>Load shedding（负载控制）</td>
</tr>
<tr>
<td>Telemetry（遥测）</td>
<td>Telemetry（遥测）</td>
</tr>
<tr>
<td>Request Tracing（分布式追踪）</td>
<td>Request Tracing（分布式追踪）</td>
</tr>
<tr>
<td>Fault Injection（故障注入）</td>
<td>Fault Injection（故障注入）</td>
</tr>
</tbody>
</table>
<blockquote>
<p>备注：Outbound 特性是指服务请求侧的 Sidecar 提供的功能特性，而 Inbound 特性是指服务提供侧 Sidecar 提供的功能特性。一些特性如遥测和分布式跟踪需要两侧的 Sidecar 都提供支持；而另一些特性则只需要在一侧提供，例如鉴权只需要在服务提供侧提供，重试只需要在请求侧提供。</p>
</blockquote>
<h3 class="group head-tag" id="典型应用场景">典型应用场景<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e5%85%b8%e5%9e%8b%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af"></a></h3><p>Istio 服务管控包括下列的典型应用场景：</p>
<h4 class="group head-tag" id="分布式调用追踪">分布式调用追踪<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e5%88%86%e5%b8%83%e5%bc%8f%e8%b0%83%e7%94%a8%e8%bf%bd%e8%b8%aa"></a></h4><p>在微服务架构中，业务的调用链非常复杂，一个来自用户的请求可能涉及到几十个服务的协同处理。因此需要一个跟踪系统来记录和分析同一次请求在整个调用链上的相关事件，从而帮助研发和运维人员分析系统瓶颈，快速定位异常和优化调用链路。</p>
<p>Istio 通过在 Envoy 代理上收集调用相关数据，实现了对应用无侵入的分布式调用跟踪分析。 Istio 实现分布式调用追踪的原理如下图所示:</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./distributed-tracing.png"
      alt="Istio 实现分布式调用追踪的原理"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>Envoy 收集一个端到端调用中的各个分段的数据，并将这些调用追踪信息发送给 Mixer，Mixer Adapter 将追踪信息发送给相应的服务后端进行处理。整个调用追踪信息的生成流程不需要应用程序介入，因此不需要将分布式跟踪相关代码注入到应用程序中。</p>
<blockquote>
<p>注意：应用仍需要在进行出口调用时将收到的入口请求中 tracing 相关的 header 转发出去，传递给调用链中下一个边车进行处理。</p>
</blockquote>
<h4 class="group head-tag" id="度量收集">度量收集<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e5%ba%a6%e9%87%8f%e6%94%b6%e9%9b%86"></a></h4><p>Istio 实现度量收集的原理如下图所示:</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./metrics-collecting.png"
      alt="Istio 实现度量收集的原理"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>Envoy 收集指标相关的原始数据，如请求的服务，HTTP 状态码，调用时延等，这些收集到的指标数据被送到 Mixer，通过 Mixer Adapters 将指标信息转换后发送到后端的监控系统中。由于 Mixer 使用了插件机制，后端监控系统可以根据需要在运行期进行动态切换。</p>
<h4 class="group head-tag" id="灰度发布">灰度发布<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e7%81%b0%e5%ba%a6%e5%8f%91%e5%b8%83"></a></h4><p>当应用上线以后，运维面临的一大挑战是如何能够在不影响已上线业务的情况下进行升级。无论进行了多么完善的测试，都无法保证线下测试时发现所有潜在故障。在无法百分百避免版本升级故障的情况下，需要通过一种方式进行可控的版本发布，把故障影响控制在可以接受的范围内，并可以快速回退。</p>
<p>可以通过灰度发布（又名金丝雀发布）来实现业务从老版本到新版本的平滑过渡，并避免升级过程中出现的问题对用户造成的影响。</p>
<p>Istio 通过高度的抽象和良好的设计采用一致的方式实现了灰度发布。在发布新版本后，运维人员可以通过定制路由规则将特定的流量（如具有指定特征的测试用户）导入新版本服务中以进行测试。通过渐进受控地向新版本导入生产流量，可以最小化升级中出现的故障对用户的影响。</p>
<p>采用 Istio 进行灰度发布的流程如下图所示：</p>
<p>首先，通过部署新版本的服务，并将通过路由规则将金丝雀用户的流量导入到新版本服务中</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./canary-1.png"
      alt="canary"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>测试稳定后，使用路由规则将生产流量逐渐导入到新版本系统中，如按 5%，10%，50%，80%逐渐导入。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./canary-2.png"
      alt="canary-2"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>如果新版本工作正常，则最后将所有流量导入到新版本服务中，并将老版本服务下线；如中间出现问题，则可以将流量重新导回老版本，在新版本中修复故障后采用该流程重新发布。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./canary-3.png"
      alt="canary-3"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<h4 class="group head-tag" id="断路器">断路器<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e6%96%ad%e8%b7%af%e5%99%a8"></a></h4><p>在微服务架构中，存在着许许多多的服务单元，若一个服务出现故障，就会因依赖关系形成故障蔓延，最终导致整个系统的瘫痪，这样的架构相较传统架构就更加的不稳定。为了解决这样的问题，因此产生了断路器模式。</p>
<p>断路器模式指，在某个服务发生故障时，断路器的故障监控向调用放返回一个及时的错误响应，而不是长时间的等待。这样就不会使得调用线程因调用故障被长时间占用，从而避免了故障在整个系统中的蔓延。</p>
<p>Istio 实现断路器的原理如下图所示:</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./circuitbreaker.png"
      alt="Istio 实现断路器的原理"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>管理员通过 destination policy 设置断路触发条件，断路时间等参数。例如设置服务 B 发生 10 次 5XX 错误后断路 15 分钟。则当服务 B 的某一实例满足断路条件后，就会被从 LB 池中移除 15 分钟。在这段时间内，Envoy 将不再把客户端的请求转发到该服务实例。</p>
<p>Istio 的断路器还支持配置最大链接数，最大待处理请求数，最大请求数，每链接最大请求数，重试次数等参数。当达到设置的最大请求数后，新发起的请求会被 Envoy 直接拒绝。</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./circuitbreaker-parameters.png"
      alt="circuitbreaker-parameters"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<h4 class="group head-tag" id="故障注入">故障注入<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e6%95%85%e9%9a%9c%e6%b3%a8%e5%85%a5"></a></h4><p>对于一个大型微服务应用而言，系统的健壮性非常重要。在微服务系统中存在大量的服务实例，当部分服务实例出现问题时，微服务应用需要具有较高的容错性，通过重试，断路，自愈等手段保证系统能够继续对外正常提供服务。因此在应用发布到生产系统强需要对系统进行充分的健壮性测试。</p>
<p>对微服务应用进行健壮性测试的一个最大的困难是如何对系统故障进行模拟。在一个部署了成百上千微服务的测试环境中，如果想通过对应用，主机或者交换机进行设置来模拟微服务之间的通信故障是非常困难的。</p>
<p>Istio 通过服务网格承载了微服务之间的通信流量，因此可以在网格中通过规则进行故障注入，模拟部分微服务出现故障的情况，对整个应用的健壮性进行测试。</p>
<p>故障注入的原理如下图所示：</p>

  <figure class="data-image-info ">
    <img
      class="data-image"
      src="./fault-injection.png"
      alt="fault-injection"
      loading="lazy" />
    <figcaption></figcaption>
  </figure>

<p>测试人员通过 Pilot 向 Envoy 注入了一个规则，为发向服务 MS-B 的请求加入了指定时间的延迟。当客户端请求发向 MSB-B 时，Envoy 会根据该规则为该请求加入时延，引起客户的请求超时。通过设置规则注入故障的方式，测试人员可以很方便地模拟微服务之间的各种通信故障，对微服务应用的健壮性进行较为完整的模拟测试。</p>
<h2 class="group head-tag" id="总结">总结<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e6%80%bb%e7%bb%93"></a></h2><p>服务网格为微服务提供了一个对应用程序透明的安全、可靠的通信基础设施层。采用服务网格后，微服务应用开发人员可以专注于解决业务领域问题，将一些通用问题交给服务网格处理。采用服务网格后，避免了代码库带来的依赖，可以充分发挥微服务的异构优势，开发团队可以根据业务需求和开发人员能力自由选择技术栈。</p>
<p>Istio 具有良好的架构设计，提供了强大的二次开发扩展性和用户定制能力。虽然 Istio 目前还处于 beta 阶段，但已经获得众多知名公司和产品的支持，是一个非常具有前景的开源服务网格开源项目。</p>
<h2 class="group head-tag" id="参考">参考<a data-title-of-head class="group-hover:after:content-['__#'] no-underline hover:text-blue-700" href="#%e5%8f%82%e8%80%83"></a></h2><ul>
<li>
<a
  class="after:content-['_↗']"
  href="https://istio.io/docs/"
  target="_blank"
  >Istio online documentation</a
>
</li>
<li>
<a
  class="after:content-['_↗']"
  href="http://philcalcado.com/2017/08/03/pattern_service_mesh.html"
  target="_blank"
  >Pattern: Service Mesh</a
>
</li>
<li>
<a
  class="after:content-['_↗']"
  href="https://istio.io/blog/2017/mixer-spof-myth.html"
  target="_blank"
  >Mixer and the SPOF Myth</a
>
</li>
</ul>

        </div>

        
        <hr class="mx-1 my-1 md:mx-3 lg:mx-10" />

        
        <div
          class="flex flex-col justify-start px-1 pb-5 pt-1 md:px-3 lg:flex-row lg:justify-between lg:px-10">
          
          
          
            <div class="flex flex-row flex-wrap items-center">
              
                <a
                  class="mx-1 my-0.5 rounded-lg border border-gray-200 px-1.5 py-1 text-center text-xs text-gray-600 hover:bg-gray-100 dark:border-gray-500 dark:text-gray-200 dark:hover:bg-gray-600"
                  href="https://iohub.github.io/tags/microservice/"
                  >Microservice</a
                >
              
                <a
                  class="mx-1 my-0.5 rounded-lg border border-gray-200 px-1.5 py-1 text-center text-xs text-gray-600 hover:bg-gray-100 dark:border-gray-500 dark:text-gray-200 dark:hover:bg-gray-600"
                  href="https://iohub.github.io/tags/service-mesh/"
                  >service Mesh</a
                >
              
                <a
                  class="mx-1 my-0.5 rounded-lg border border-gray-200 px-1.5 py-1 text-center text-xs text-gray-600 hover:bg-gray-100 dark:border-gray-500 dark:text-gray-200 dark:hover:bg-gray-600"
                  href="https://iohub.github.io/tags/istio/"
                  >Istio</a
                >
              
            </div>
          

        </div>
      </div>
    </div>

    
    
      <div id="post-comment">

  <div
    id="waline"
    class="w-full px-0.5 py-5 md:px-2 lg:max-w-5xl lg:px-8 dark:text-gray-400"></div>

  <script
    defer
    src="https://unpkg.com/@waline/client@v2/dist/waline.js"
    crossorigin="anonymous"></script>

  
  

  
  
  
  
  
  
  
    
  
  <script
    defer
    type="module"
    src="/js/comment-waline.min.200ac9665055cd84f1018c2a9669fd8ee37b9b164c27c52289852cd8d19d60c4.js"></script>







  

</div>
    
  </div>
<div data-dial-init class="group fixed bottom-24 end-8 md:end-20">
  <div
    id="speed-dial-menu-bottom-right"
    class="mb-4 flex hidden flex-col items-center space-y-2">
    
    
      <button
        id="to-top-button"
        type="button"
        data-tooltip-target="tooltip-top"
        data-tooltip-placement="left"
        class="flex hidden h-[52px] w-[52px] items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 shadow-sm hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-400">
        <svg
          class="h-5 w-5"
          aria-hidden="true"
          fill="currentColor"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M629.333333 853.333333h-234.666666c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h234.666666c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM842.666667 360.533333L535.466667 113.066667c-12.8-8.533333-27.733333-8.533333-40.533334 0L183.466667 360.533333c-6.4 6.4-12.8 14.933333-12.8 23.466667 0 2.133333 0 6.4 2.133333 8.533333 2.133333 12.8 14.933333 21.333333 27.733333 21.333334h155.733334v236.8c0 19.2 12.8 29.866667 32 29.866666h249.6c21.333333 0 34.133333-12.8 34.133333-29.866666v-234.666667h151.466667c12.8 0 25.6-8.533333 27.733333-21.333333s0-25.6-8.533333-34.133334zM629.333333 746.666667h-234.666666c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h234.666666c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32z"></path>
        </svg>
        <span class="sr-only">Top</span>
      </button>
      <div
        id="tooltip-top"
        role="tooltip"
        class="tooltip invisible absolute z-10 inline-block w-auto rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
        Top
        <div class="tooltip-arrow" data-popper-arrow></div>
      </div>
    

    
      
      <button
        type="button"
        data-tooltip-target="tooltip-toc"
        data-tooltip-placement="left"
        data-drawer-target="drawer-body-scrolling-toc"
        data-drawer-show="drawer-body-scrolling-toc"
        data-drawer-body-scrolling="true"
        aria-controls="drawer-body-scrolling-toc"
        class="flex h-[52px] w-[52px] items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 shadow-sm hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-400">
        <svg
          class="h-5 w-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 1024 1024"
          version="1.1">
          <path
            d="M901.8 313.5H354.4c-32 0-58.2-26.2-58.2-58.2v-18.1c0-32 26.2-58.2 58.2-58.2h547.4c32 0 58.2 26.2 58.2 58.2v18.1c0 32-26.2 58.2-58.2 58.2z"></path>
          <path
            d="M131.3 246.2m-67.3 0a67.3 67.3 0 1 0 134.6 0 67.3 67.3 0 1 0-134.6 0Z"></path>
          <path
            d="M901.8 579.3H354.4c-32 0-58.2-26.2-58.2-58.2V503c0-32 26.2-58.2 58.2-58.2h547.4c32 0 58.2 26.2 58.2 58.2v18.1c0 32-26.2 58.2-58.2 58.2z"></path>
          <path
            d="M131.3 512m-67.3 0a67.3 67.3 0 1 0 134.6 0 67.3 67.3 0 1 0-134.6 0Z"></path>
          <path
            d="M901.8 845.1H354.4c-32 0-58.2-26.2-58.2-58.2v-18.1c0-32 26.2-58.2 58.2-58.2h547.4c32 0 58.2 26.2 58.2 58.2v18.1c0 32-26.2 58.2-58.2 58.2z"></path>
          <path
            d="M131.3 777.8m-67.3 0a67.3 67.3 0 1 0 134.6 0 67.3 67.3 0 1 0-134.6 0Z"></path>
        </svg>

        <span class="sr-only">Catelog</span>
      </button>
      <div
        id="tooltip-toc"
        role="tooltip"
        class="tooltip invisible absolute z-10 inline-block w-auto rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
        Catelog
        <div class="tooltip-arrow" data-popper-arrow></div>
      </div>

      
      
        <button
          id="to-comment-button"
          type="button"
          data-tooltip-target="tooltip-comment"
          data-tooltip-placement="left"
          class="flex h-[52px] w-[52px] items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 shadow-sm hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-400">
          <svg
            class="h-5 w-5"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M940.373333 896H83.626667c-17.066667 0-32.426667 13.653333-32.426667 32.426667 0 17.066667 13.653333 32.426667 32.426667 32.426666h858.453333c17.066667 0 32.426667-13.653333 32.426667-32.426666-1.706667-17.066667-15.36-32.426667-34.133334-32.426667zM201.386667 752.64H341.333333c10.24 0 20.48-3.413333 27.306667-11.946667L839.68 273.066667c15.36-15.36 15.36-40.96 0-56.32L699.733333 75.093333c-6.826667-6.826667-17.066667-11.946667-27.306666-11.946666-10.24 0-20.48 3.413333-27.306667 11.946666L174.08 546.133333c-6.826667 6.826667-11.946667 17.066667-11.946667 27.306667v139.946667c0 22.186667 18.773333 39.253333 39.253334 39.253333z"></path>
          </svg>
          <span class="sr-only">Comment</span>
        </button>
        <div
          id="tooltip-comment"
          role="tooltip"
          class="tooltip invisible absolute z-10 inline-block w-auto rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
          
            <p id="speed-comment-count-id" class="whitespace-nowrap">
              <span class="waline-comment-count" data-path="/2018/03/29/what-is-service-mesh-and-istio/"
                >...</span
              >
              Comments
            </p>
          
          <div class="tooltip-arrow" data-popper-arrow></div>
        </div>
      
    


    
    <button
      type="button"
      data-drawer-target="drawer-body-scrolling"
      data-drawer-show="drawer-body-scrolling"
      data-drawer-body-scrolling="true"
      aria-controls="drawer-body-scrolling"
      data-tooltip-target="tooltip-tags"
      data-tooltip-placement="left"
      class="flex h-[52px] w-[52px] items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 shadow-sm hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-400">
      <svg
        class="h-5 w-5"
        aria-hidden="true"
        fill="currentColor"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg">
        <path
          d="M96.512 454.272h839.84a78.752 78.752 0 0 1 78.752 78.752v8.704a78.752 78.752 0 0 1-78.752 78.752H96.512a78.752 78.752 0 0 1-78.752-78.752v-8.704a78.752 78.752 0 0 1 78.752-78.752zM571.872 232.672H904.32a55.424 55.424 0 0 1 0 110.848H571.872a55.424 55.424 0 0 1 0-110.848zM350.208 731.36h332.448a55.424 55.424 0 0 1 0 110.848H350.208a55.424 55.424 0 0 1 0-110.848zM128.544 177.248h221.664a55.424 55.424 0 0 1 0 110.848H128.544a55.424 55.424 0 0 1 0-110.848z"
          p-id="22696"></path>
      </svg>
      <span class="sr-only">Tags</span>
    </button>
    <div
      id="tooltip-tags"
      role="tooltip"
      class="tooltip invisible absolute z-10 inline-block w-auto rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
      Tags
      <div class="tooltip-arrow" data-popper-arrow></div>
    </div>

    
    
      <button
        id="to-bottom-button"
        type="button"
        data-tooltip-target="tooltip-bottom"
        data-tooltip-placement="left"
        class="flex h-[52px] w-[52px] items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 shadow-sm hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-400">
        <svg
          class="h-5 w-5"
          aria-hidden="true"
          fill="currentColor"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M635.733333 341.333333c19.2 0 32 12.8 32 29.866667v236.8h155.733334c12.8 0 25.6 8.533333 27.733333 21.333333 2.133333 4.266667 2.133333 6.4 2.133333 10.666667 0 8.533333-6.4 19.2-12.8 25.6L529.066667 910.933333c-12.8 8.533333-27.733333 8.533333-40.533334 0L181.333333 663.466667c-8.533333-8.533333-12.8-21.333333-8.533333-34.133334 2.133333-12.8 14.933333-21.333333 27.733333-21.333333h151.466667V371.2c0-19.2 12.8-29.866667 34.133333-29.866667h249.6z m-6.4-128c17.066667 0 32 14.933333 32 32s-14.933333 32-32 32h-234.666666c-17.066667 0-32-14.933333-32-32s14.933333-32 32-32h234.666666z m0-106.666666c17.066667 0 32 14.933333 32 32S646.4 170.666667 629.333333 170.666667h-234.666666c-17.066667 0-32-14.933333-32-32S377.6 106.666667 394.666667 106.666667h234.666666z"></path>
        </svg>
        <span class="sr-only">Bottom</span>
      </button>
      <div
        id="tooltip-bottom"
        role="tooltip"
        class="tooltip invisible absolute z-10 inline-block w-auto rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
        Bottom
        <div class="tooltip-arrow" data-popper-arrow></div>
      </div>
    
  </div>

  <button
    type="button"
    data-dial-toggle="speed-dial-menu-bottom-right"
    aria-controls="speed-dial-menu-bottom-right"
    aria-expanded="false"
    class="flex h-14 w-14 items-center justify-center rounded-full bg-blue-700 text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
    <svg
      class="h-5 w-5 transition-transform group-hover:rotate-45"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 18 18">
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 1v16M1 9h16" />
    </svg>
    <span class="sr-only">Open actions menu</span>
  </button>
</div>
<div
  id="drawer-body-scrolling"
  class="fixed left-0 top-0 z-40 h-screen w-64 -translate-x-full overflow-y-auto bg-white p-4 transition-transform md:w-80 lg:w-96 dark:bg-gray-800"
  tabindex="-1"
  aria-labelledby="drawer-body-scrolling-label">
  <h5
    id="drawer-body-scrolling-label"
    class="text-base font-semibold uppercase text-gray-500 dark:text-gray-400">
    TAGS
  </h5>
  <button
    type="button"
    data-drawer-hide="drawer-body-scrolling"
    aria-controls="drawer-body-scrolling"
    class="absolute end-2.5 top-2.5 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white">
    <svg
      class="h-3 w-3"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 14 14">
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
    </svg>
    <span class="sr-only">Close tags</span>
  </button>

  <div class="overflow-y-auto py-3">
    <div class="flex flex-wrap justify-center gap-2 p-3">
      
        <a
          href="https://iohub.github.io/tags/api-gateway/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">API Gateway</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/doc/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">doc</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/docker/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Docker</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >2</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/etcd/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">etcd</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/go/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">go</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >2</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/go.work/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">go.work</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >2</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/helm/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Helm</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/istio/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Istio</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >7</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/kubernetes/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Kubernetes</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >3</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/microservice/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Microservice</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >6</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/multi-module/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">multi module</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >2</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/nginmesh/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">nginmesh</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/raft/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">raft</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/security/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Security</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >3</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/service-mesh/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">service Mesh</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >11</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/tips/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Tips</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >3</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/ubuntu/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">ubuntu</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/vim/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">Vim</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
        <a
          href="https://iohub.github.io/tags/%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/"
          class="group flex items-center rounded-lg border p-2 text-xs text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
          <span class="flex-1 whitespace-nowrap">配置参数</span>
          <span
            class="ms-2 inline-flex h-2 w-2 items-center justify-center rounded-full bg-blue-100 p-2 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"
            >1</span
          >
        </a>
      
    </div>
  </div>
</div>

<div
  id="drawer-body-scrolling-toc"
  class="fixed left-0 top-0 z-40 h-screen w-64 -translate-x-full overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800 md:w-80 lg:w-96"
  tabindex="-1"
  aria-labelledby="drawer-body-scrolling-toc-label">
  <h5
    id="drawer-body-scrolling-toc-label"
    class="text-base font-semibold text-gray-500 dark:text-gray-400">
    On this page
  </h5>
  <button
    type="button"
    data-drawer-hide="drawer-body-scrolling-toc"
    aria-controls="drawer-body-scrolling-toc"
    class="absolute end-2.5 top-2.5 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white">
    <svg
      class="h-3 w-3"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 14 14">
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
    </svg>
    <span class="sr-only">Close menu</span>
  </button>
  <div class="overflow-y-auto py-4">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#微服务架构的演进">微服务架构的演进</a></li>
    <li><a href="#istio-服务网格">Istio 服务网格</a>
      <ul>
        <li><a href="#istio-控制面">Istio 控制面</a></li>
        <li><a href="#istio-数据面">Istio 数据面</a></li>
        <li><a href="#典型应用场景">典型应用场景</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>



  

<script type="module" src="/js/to-top-or-bottom.min.38b6a1a23c3859c79a2a6eb832cb844e469e3832c6c820c96e1ee83522ad1c2d.js"></script>
<script>
  document.getElementById("to-comment-button").addEventListener("click", () => {
    console.log("go to comments");
    window.scrollTo({
      top: document.getElementById("post-comment").offsetTop - 100,
      behavior: "smooth",
    });
  });
</script>

<div
  id="img-zoom"
  class="m-h-screen fixed inset-0 left-0 top-0 z-30 mx-auto hidden h-full w-full cursor-zoom-out items-center justify-center bg-black/90"
>
  <div id="img-content" class="my-20 h-5/6 w-11/12 bg-contain bg-center bg-no-repeat opacity-100 md:w-10/12"></div>
</div>




    
<div
  id="search-overlay"
  class="fixed inset-0 z-50 hidden bg-gray-900/90 backdrop-blur-lg dark:bg-gray-900/80"></div>
<section id="search-section" class="z-50 flex hidden h-dvh w-full flex-col">
  
  <div
    class="flex h-dvh w-full flex-col overflow-auto md:mx-auto md:w-2/3 lg:max-w-2xl">
    
    <div
      id="searchBoxDiv"
      class="sticky top-[-88px] z-50 flex flex-row justify-between px-8 pt-[88px]">
      <div id="searchBox" class="my-6 flex w-full flex-row items-center"></div>
    </div>

    
    <div class="h-[30rem] overflow-auto">
      <div id="searchResults" class="my-3 px-6"></div>
      <div
        id="NotSearchResults"
        class="hidden flex-col items-center justify-around space-y-4 px-6 py-10">
        <p class="font-Oswald text-lg font-bold tracking-wide text-gray-500">
          No search content
        </p>
      </div>
      <div
        id="searchError"
        class="hidden flex-col items-center justify-around space-y-4 px-6 py-10 text-center ">
        <p class="font-Oswald text-lg font-bold text-red-500">
          Oop ! Error occur ...
        </p>
      </div>
      <div
        id="searchLoading"
        class="hidden flex-col items-center justify-around px-6 py-10">
        <svg
          t="1689331200868"
          class="icon animate-spin"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="51409"
          width="128"
          height="128">
          <path
            d="M512 170.666667v85.333333a256 256 0 1 1-223.573333 131.2L213.930667 345.6A341.333333 341.333333 0 1 0 512 170.666667z"
            fill="#bfbfbf"
            opacity=".3"
            p-id="51410"></path>
        </svg>
      </div>
    </div>
  </div>
  
  <div
    class="bottom-0 flex flex-col items-center justify-center space-y-2 py-8 font-Oswald text-xs font-bold text-gray-600">
    <div class="hidden md:block">Press ESC to cancle</div>
    <div class="flex items-center">
      <span class="">Powered by &nbsp;</span>
      <img src="/images/default/algolia-logo.svg" alt="" class="h-4" />
    </div>
  </div>
</section>

<script
  src="https://cdn.jsdelivr.net/npm/algoliasearch@4.17.2/dist/algoliasearch-lite.umd.js"
  integrity="sha256-X2G+vjV8i6Jj2NSGFTvy6Z4q2AlmF5aH0HiIpWJ8eU4="
  crossorigin="anonymous"></script>
<script
  src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.56.3/dist/instantsearch.production.min.js"
  integrity="sha256-mWvjWAfZylKMOg+S3HLq+wng1HHRnl2Idr2r8NsUzIU="
  crossorigin="anonymous"></script>








  

<script src="/js/search.min.3059d56d0f82f599aef21375a07d20f05fbffed10a16f7f7292a2ad825032e01.js"></script>
<footer
  class="mx-auto flex w-full max-w-screen-xl flex-col-reverse items-center gap-y-3 border-t border-gray-200 py-6 dark:border-gray-700 md:px-12 lg:flex-row lg:justify-between">
  
  <div
    class="flex flex-col items-center justify-between space-y-3 text-xs text-gray-500 dark:text-gray-200 lg:items-start">
    
    <div class="items-center font-Montserrat font-thin">
      &copy;
      
      
      
        2022 -
        2024
      

      Seven. All Rights Reserved
    </div>
  </div>

  
  <div
    class="flex flex-row items-center font-Montserrat text-xs font-thin text-gray-500 dark:text-gray-200">
    <span>Powered By</span>
    <a href="https://gohugo.io/" aria-label="hugo link">
      <img
        src="/images/default/hugo-logo-wide.svg"
        alt="Hugo"
        class="mx-1 h-3" />
    </a>
    <span> &#8739; Based on Theme</span>
    <a
      href="https://github.com/mrhelloboy/seven"
      aria-label="The github address of seven theme"
      class="">
      <img
        id="footer-theme-light-logo"
        src="/images/default/seven-logo.svg"
        alt="seven theme logo"
        class="mx-1 h-5" />

      <img
        id="footer-theme-dark-logo"
        src="/images/default/seven-logo-dark.svg"
        alt="seven theme logo"
        class="mx-1 hidden h-5" />
    </a>
  </div>

  
  <div
    class="mt-4 flex space-x-5 rtl:space-x-reverse sm:justify-center md:mt-0">
    
      
      

      

      

      
    
      
        <a
          href="mailto:linzhanqi123@gmail.com"
          class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
          <svg
            class="h-4 w-4"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M513 583.8l448.5-448.5c-11.6-4.7-24.3-7.3-37.5-7.3H100c-12.7 0-24.9 2.4-36.1 6.7L513 583.8z"
              p-id="88208"></path>
            <path
              d="M513 674.3L14.6 175.9C5.3 191.1 0 208.9 0 228v568c0 55.2 44.8 100 100 100h824c55.2 0 100-44.8 100-100V228c0-18.5-5.1-35.9-13.9-50.8L513 674.3z"
              p-id="88209"></path>
          </svg>
          <span class="sr-only">Email page</span>
        </a>
      
      

      

      

      
    
      
      
        <a
          href=""
          class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
          <svg
            class="h-4 w-4"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 8 19">
            <path
              fill-rule="evenodd"
              d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"
              clip-rule="evenodd" />
          </svg>
          <span class="sr-only">Facebook page</span>
        </a>
      

      

      

      
    
      
      

      

      
        <a
          href="https://github.com/mrhelloboy/hugo-theme-seven-demo"
          class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
          <svg
            class="h-4 w-4"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"
              clip-rule="evenodd" />
          </svg>
          <span class="sr-only">GitHub account</span>
        </a>
      

      
    
      
      

      

      

      
        <button
          data-popover-target="wechat-popover-no-arrow"
          type="button"
          class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
          <svg
            class="h-4 w-4"
            viewBox="0 0 1184 1024"
            fill="currentColor"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1495">
            <path
              d="M331.424 263.424q0-23.424-14.272-37.728t-37.728-14.272q-24.576 0-43.424 14.56t-18.848 37.44q0 22.272 18.848 36.864t43.424 14.56q23.424 0 37.728-14.016t14.272-37.44zM756 553.152q0-16-14.56-28.576t-37.44-12.576q-15.424 0-28.288 12.864t-12.864 28.288q0 16 12.864 28.864t28.288 12.864q22.848 0 37.44-12.576t14.56-29.152zM621.152 263.424q0-23.424-14.016-37.728t-37.44-14.272q-24.576 0-43.424 14.56t-18.848 37.44q0 22.272 18.848 36.864t43.424 14.56q23.424 0 37.44-14.016t14.016-37.44zM984 553.152q0-16-14.848-28.576t-37.152-12.576q-15.424 0-28.288 12.864t-12.864 28.288q0 16 12.864 28.864t28.288 12.864q22.272 0 37.152-12.576t14.848-29.152zM832 326.272q-17.728-2.272-40-2.272-96.576 0-177.728 44t-127.712 119.136-46.56 164.288q0 44.576 13.152 86.848-20 1.728-38.848 1.728-14.848 0-28.576-0.864t-31.424-3.712-25.44-4-31.136-6.016-28.576-6.016l-144.576 72.576 41.152-124.576q-165.728-116-165.728-280 0-96.576 55.712-177.728t150.848-127.712 207.712-46.56q100.576 0 190.016 37.728t149.728 104.288 78.016 148.864zM1170.272 646.848q0 66.848-39.136 127.712t-106.016 110.56l31.424 103.424-113.728-62.272q-85.728 21.152-124.576 21.152-96.576 0-177.728-40.288t-127.712-109.44-46.56-150.848 46.56-150.848 127.712-109.44 177.728-40.288q92 0 173.152 40.288t130.016 109.728 48.864 150.56z"
              p-id="1496"></path>
          </svg>
        </button>

        <div
          data-popover
          id="wechat-popover-no-arrow"
          role="tooltip"
          class="invisible absolute z-10 inline-block hidden w-52 overflow-hidden rounded-lg border border-gray-100 bg-white text-sm text-gray-500 opacity-0 shadow-sm transition-opacity duration-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400">
          <ul class="text-sm text-gray-700 dark:text-gray-200">
            
              <li>
                <img src="/images/society/wechat/wechat.jpg" alt="" />
              </li>
            
          </ul>
        </div>
      
    
      
      

      
        <a
          href=""
          class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
          <svg
            class="h-4 w-4"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 20">
            <path
              fill="currentColor"
              d="M12.186 8.672 18.743.947h-2.927l-5.005 5.9-4.44-5.9H0l7.434 9.876-6.986 8.23h2.927l5.434-6.4 4.82 6.4H20L12.186 8.672Zm-2.267 2.671L8.544 9.515 3.2 2.42h2.2l4.312 5.719 1.375 1.828 5.731 7.613h-2.2l-4.699-6.237Z" />
          </svg>

          <span class="sr-only">X page</span>
        </a>
      

      

      
    

    
    
      <a href="#" class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
  <svg
    class="h-4 w-4"
    aria-hidden="true"
    xmlns="http://www.w3.org/2000/svg"
    fill="currentColor"
    viewBox="0 0 21 16">
    <path
      d="M16.942 1.556a16.3 16.3 0 0 0-4.126-1.3 12.04 12.04 0 0 0-.529 1.1 15.175 15.175 0 0 0-4.573 0 11.585 11.585 0 0 0-.535-1.1 16.274 16.274 0 0 0-4.129 1.3A17.392 17.392 0 0 0 .182 13.218a15.785 15.785 0 0 0 4.963 2.521c.41-.564.773-1.16 1.084-1.785a10.63 10.63 0 0 1-1.706-.83c.143-.106.283-.217.418-.33a11.664 11.664 0 0 0 10.118 0c.137.113.277.224.418.33-.544.328-1.116.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595 17.286 17.286 0 0 0-2.973-11.59ZM6.678 10.813a1.941 1.941 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.919 1.919 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Zm6.644 0a1.94 1.94 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.918 1.918 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Z" />
  </svg>
  <span class="sr-only">Discord community</span>
</a>

<a href="#" class="text-gray-400 hover:text-gray-900 dark:hover:text-white">
  <svg
    class="h-4 w-4"
    aria-hidden="true"
    xmlns="http://www.w3.org/2000/svg"
    fill="currentColor"
    viewBox="0 0 20 20">
    <path
      fill-rule="evenodd"
      d="M10 0a10 10 0 1 0 10 10A10.009 10.009 0 0 0 10 0Zm6.613 4.614a8.523 8.523 0 0 1 1.93 5.32 20.094 20.094 0 0 0-5.949-.274c-.059-.149-.122-.292-.184-.441a23.879 23.879 0 0 0-.566-1.239 11.41 11.41 0 0 0 4.769-3.366ZM8 1.707a8.821 8.821 0 0 1 2-.238 8.5 8.5 0 0 1 5.664 2.152 9.608 9.608 0 0 1-4.476 3.087A45.758 45.758 0 0 0 8 1.707ZM1.642 8.262a8.57 8.57 0 0 1 4.73-5.981A53.998 53.998 0 0 1 9.54 7.222a32.078 32.078 0 0 1-7.9 1.04h.002Zm2.01 7.46a8.51 8.51 0 0 1-2.2-5.707v-.262a31.64 31.64 0 0 0 8.777-1.219c.243.477.477.964.692 1.449-.114.032-.227.067-.336.1a13.569 13.569 0 0 0-6.942 5.636l.009.003ZM10 18.556a8.508 8.508 0 0 1-5.243-1.8 11.717 11.717 0 0 1 6.7-5.332.509.509 0 0 1 .055-.02 35.65 35.65 0 0 1 1.819 6.476 8.476 8.476 0 0 1-3.331.676Zm4.772-1.462A37.232 37.232 0 0 0 13.113 11a12.513 12.513 0 0 1 5.321.364 8.56 8.56 0 0 1-3.66 5.73h-.002Z"
      clip-rule="evenodd" />
  </svg>
  <span class="sr-only">Dribbble account</span>
</a>

    

  </div>
</footer>

<script>
  var matches = document.querySelectorAll("button[data-popover-target]");
  for (var i = 0; i < matches.length; i++) {
    let id = matches[i].getAttribute("data-popover-target");

    matches[i].addEventListener("mouseenter", function () {
      document.getElementById(id).classList.remove("hidden");
    });

    matches[i].addEventListener("mouseleave", function () {
      document.getElementById(id).classList.add("hidden");
    });
  }
</script>


  

<script src="/js/dark-mode.min.f4601e5679d2fc365123dbb2569483af6ba487a6873fd698326ba052b1868055.js" defer></script>

  
    
    
      
    
    <script src="/js/toc.min.5e217e8df7eeeecad3818ba808f44ec8bb744f6a71d6445164c1d804dab77b55.js"></script>
  

  

  
  
    
  
  <script src="/js/zoom-img.min.b2135ae71b015677ea50e12f6b206c51a0530f747f50506c1db398dd410fcb49.js" defer></script>

  
  
    
  
  <script src="/js/link-to-top.min.5076255797b394d888abffc233d1cc417a576c3908cd84108f0e0da6d48c2cc5.js" defer></script>

  
    <script>
      document.querySelectorAll("pre > code").forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement("button");
        copybutton.classList.add("copy-code");
        copybutton.innerHTML = "Copy";

        function copyingDone() {
          copybutton.innerHTML = "Copied";
          setTimeout(() => {
            copybutton.innerHTML = "Copy";
          }, 2000);
        }

        copybutton.addEventListener("click", (cb) => {
          if ("clipboard" in navigator) {
            navigator.clipboard.writeText(codeblock.textContent);
            copyingDone();
            return;
          }

          const range = document.createRange();
          range.selectNodeContents(codeblock);
          const selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
          try {
            document.execCommand("copy");
            copyingDone();
          } catch (e) {}
          selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
          container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
          
        } else if (
          codeblock.parentNode.parentNode.parentNode.parentNode.parentNode
            .nodeName == "TABLE"
        ) {
          
          codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(
            copybutton,
          );
        } else {
          
          codeblock.parentNode.appendChild(copybutton);
        }
      });
    </script>
  

  <script
    data-goatcounter="https://seven-demo.goatcounter.com/count"
    async
    src="//gc.zgo.at/count.js"></script>

</body>
</html>
